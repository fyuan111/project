CONFIG_PRINTK=y
CONFIG_HEAP_MEM_POOL_SIZE=16384
CONFIG_ASSERT=y
CONFIG_GPIO=y

# 动态线程支持（用于工作队列栈分配）
CONFIG_DYNAMIC_THREAD=y
CONFIG_DYNAMIC_THREAD_ALLOC=y

# Tickless 模式 - 按需产生中断，低开销（基础 1kHz）
# 注意: 高频时钟只适用于 ESP32，STM32 使用默认值
# CONFIG_SYS_CLOCK_TICKS_PER_SEC=100000
CONFIG_TICKLESS_KERNEL=n

# CONFIG_PM=y  # 暂时禁用，会导致休眠问题

CONFIG_BOOTARGS=y
CONFIG_BOOTARGS_STRING=""

CONFIG_THREAD_CUSTOM_DATA=y

# C++ 支持
CONFIG_CPP=y
CONFIG_STD_CPP17=y
CONFIG_REQUIRES_FULL_LIBCPP=y  # 启用完整的 C++ 标准库（包括 STL）

# Zephyr Events
CONFIG_EVENTS=y

# 启用 printf 浮点数支持
CONFIG_PICOLIBC_IO_FLOAT=y

# Timing 功能
CONFIG_TIMING_FUNCTIONS=y

# 硬件 Counter/Timer 支持（用于高精度调度）
CONFIG_COUNTER=y

# 调度优化 - 硬实时配置
CONFIG_TIMESLICING=n
CONFIG_SCHED_SCALABLE=y
CONFIG_NUM_PREEMPT_PRIORITIES=32

# 最小化中断延迟
CONFIG_IRQ_OFFLOAD=n
CONFIG_ZERO_LATENCY_IRQS=y  # 仅 ARM Cortex-M 支持

# 启用高精度计时器 (仅 ESP32 支持运行时频率读取)
# CONFIG_TIMER_READS_ITS_FREQUENCY_AT_RUNTIME=y

# FML 性能测量配置
CONFIG_FML_PERF=y
CONFIG_FML_PERF_PRINT=y
# CONFIG_FML_PERF_STATS=y

# 工作队列调度性能测试（在代码中直接定义）
# CONFIG_FML_WORKQUEUE_PERF_TEST=y